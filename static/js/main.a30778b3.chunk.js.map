{"version":3,"sources":["components/SearchBar.js","App.js","index.js"],"names":["SearchBar","useState","searchTerm","setSearchTerm","placeHolderText","setPlaceHolderText","debouncedTerm","setDebouncedTerm","results","setResults","useEffect","timeoutId","setTimeout","clearTimeout","a","axios","get","params","action","origin","format","list","srlimit","srsearch","then","res","data","query","search","searchQuery","onChangeHanlder","event","target","value","removePlaceHolderText","renderedList","map","className","id","title","href","pageid","rel","dangerouslySetInnerHTML","__html","DOMPurify","sanitize","snippet","class","type","name","onChange","placeholder","onClick","onFocus","App","root","document","getElementById","ReactDOM","render"],"mappings":"2OAiJeA,EA5IG,WAAO,IAAD,EACcC,mBAAS,IADvB,mBACfC,EADe,KACHC,EADG,OAEwBF,mBAAS,eAFjC,mBAEfG,EAFe,KAEEC,EAFF,OAGoBJ,mBAASG,GAH7B,mBAGfE,EAHe,KAGAC,EAHA,OAIQN,mBAAS,IAJjB,mBAIfO,EAJe,KAINC,EAJM,KAOtBC,qBAAU,WACR,IAAIC,EAAYC,YAAW,WACzBL,EAAiBL,KAChB,KAEH,OAAO,WACLW,aAAaF,MAEd,CAACT,IAGJQ,qBAAU,WAmBJJ,GAlBa,uCAAG,4BAAAQ,EAAA,sEACCC,IAChBC,IAAI,qCAAsC,CACzCC,OAAQ,CACNC,OAAQ,QACRC,OAAQ,IACRC,OAAQ,OACRC,KAAM,SACNC,QAAS,EACTC,SAAUjB,KAGbkB,MAAK,SAACC,GAAD,OAASA,EAAIC,KAAKC,MAAMC,UAZd,OACZF,EADY,OAelBjB,EAAWiB,GAfO,2CAAH,oDAmBfG,KAED,CAACvB,IAuCJ,IAAMwB,EAAkB,SAACC,GACvB5B,EAAc4B,EAAMC,OAAOC,QAGvBC,EAAwB,WAC5B7B,EAAmB,KAIf8B,EAAe3B,EAAQ4B,KAAI,SAACX,GAChC,OACE,qBAAKY,UAAU,iBAAf,SACE,gCACE,sBAAKA,UAAU,gBAAf,UACE,oBAAIC,GAAG,QAAP,SAAgBb,EAAIc,QACpB,mBACEP,OAAO,SACPQ,KAAI,yCAAoCf,EAAIgB,QAC5CC,IAAI,aAHN,SAKE,qBAAKL,UAAU,mBAAf,SACE,sDAIN,uBACA,qBAAKA,UAAU,eAAf,SACE,mBACEM,wBAAyB,CACvBC,OAAQC,IAAUC,SAASrB,EAAIsB,kBAlBJtB,EAAIgB,WA+C7C,OAlBI,qCACE,sBAAKJ,UAAU,kBAAf,UACE,mBAAGW,MAAM,kBACT,uBACEC,KAAK,OACLC,KAAK,SACLjB,MAAO/B,EACPiD,SAAUrB,EACVsB,YAAahD,EACbiD,QAASnB,EACToB,QAASpB,OAGb,qBAAKG,UAAU,iBAAf,SAAiCF,QC9H1BoB,EARH,WACV,OACE,mCACE,cAAC,EAAD,OCFAC,EAAOC,SAASC,eAAe,QAErCC,IAASC,OAAO,cAAC,EAAD,IAASJ,K","file":"static/js/main.a30778b3.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"./componentcss/SearchBar.css\";\r\nimport axios from \"axios\";\r\nimport DOMPurify from \"dompurify\";\r\n\r\nconst SearchBar = () => {\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [placeHolderText, setPlaceHolderText] = useState(\"Programming\");\r\n  const [debouncedTerm, setDebouncedTerm] = useState(placeHolderText);\r\n  const [results, setResults] = useState([]);\r\n\r\n  //this would update debounced term when user stops for 500ms after typing\r\n  useEffect(() => {\r\n    let timeoutId = setTimeout(() => {\r\n      setDebouncedTerm(searchTerm);\r\n    }, 500);\r\n\r\n    return () => {\r\n      clearTimeout(timeoutId);\r\n    };\r\n  }, [searchTerm]);\r\n\r\n  //if debounced term changes make a api call to the wikipedia api\r\n  useEffect(() => {\r\n    const searchQuery = async () => {\r\n      const data = await axios\r\n        .get(\"https://en.wikipedia.org/w/api.php\", {\r\n          params: {\r\n            action: \"query\",\r\n            origin: \"*\",\r\n            format: \"json\",\r\n            list: \"search\",\r\n            srlimit: 5,\r\n            srsearch: debouncedTerm,\r\n          },\r\n        })\r\n        .then((res) => res.data.query.search);\r\n\r\n      // console.log(data);\r\n      setResults(data);\r\n    };\r\n\r\n    if (debouncedTerm) {\r\n      searchQuery();\r\n    }\r\n  }, [debouncedTerm]);\r\n\r\n  /* useEffect(() => {\r\n    //cannot use async-await directly inside the useEffect\r\n    //create another function and set state\r\n\r\n    const searchQuery = async () => {\r\n      const data = await axios\r\n        .get(\"https://en.wikipedia.org/w/api.php\", {\r\n          params: {\r\n            action: \"query\",\r\n            origin: \"*\",\r\n            format: \"json\",\r\n            list: \"search\",\r\n            srlimit: 5,\r\n            srsearch: searchTerm || placeHolderText,\r\n          },\r\n        })\r\n        .then((res) => res.data.query.search);\r\n\r\n      console.log(data);\r\n      setResults(data);\r\n    };\r\n\r\n    if (searchTerm === \"\" && results.length === 0) {\r\n      searchQuery();\r\n    } else {\r\n      let timeoutId = setTimeout(() => {\r\n        if (searchTerm || placeHolderText) {\r\n          searchQuery();\r\n        }\r\n      }, 500);\r\n\r\n      return function cleanup() {\r\n        clearTimeout(timeoutId);\r\n      };\r\n    }\r\n  }, [searchTerm]); */\r\n\r\n  const onChangeHanlder = (event) => {\r\n    setSearchTerm(event.target.value);\r\n  };\r\n\r\n  const removePlaceHolderText = () => {\r\n    setPlaceHolderText(\"\");\r\n  };\r\n\r\n  //console.log(results);\r\n  const renderedList = results.map((res) => {\r\n    return (\r\n      <div className=\"item-container\" key={res.pageid}>\r\n        <div>\r\n          <div className=\"title-wrapper\">\r\n            <h2 id=\"title\">{res.title}</h2>\r\n            <a\r\n              target=\"_blank\"\r\n              href={`https://en.wikipedia.org?curid=${res.pageid}`}\r\n              rel=\"noreferrer\"\r\n            >\r\n              <div className=\"button-container\">\r\n                <button>Wikipedia</button>\r\n              </div>\r\n            </a>\r\n          </div>\r\n          <hr />\r\n          <div className=\"para-wrapper\">\r\n            <p\r\n              dangerouslySetInnerHTML={{\r\n                __html: DOMPurify.sanitize(res.snippet),\r\n              }}\r\n            ></p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  });\r\n\r\n  const renderContent = () => {\r\n    return (\r\n      <>\r\n        <div className=\"input-container\">\r\n          <i class=\"fas fa-search\"></i>\r\n          <input\r\n            type=\"text\"\r\n            name=\"search\"\r\n            value={searchTerm}\r\n            onChange={onChangeHanlder}\r\n            placeholder={placeHolderText}\r\n            onClick={removePlaceHolderText}\r\n            onFocus={removePlaceHolderText}\r\n          />\r\n        </div>\r\n        <div className=\"list-container\">{renderedList}</div>\r\n      </>\r\n    );\r\n  };\r\n\r\n  return renderContent();\r\n};\r\n\r\nexport default SearchBar;\r\n","import React from \"react\";\r\nimport SearchBar from \"./components/SearchBar\";\r\n\r\nconst App = () => {\r\n  return (\r\n    <>\r\n      <SearchBar></SearchBar>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\n\r\nconst root = document.getElementById(\"root\");\r\n\r\nReactDOM.render(<App />, root);\r\n"],"sourceRoot":""}